<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enterprise Dashboard - Menu Online</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .metric-card {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .metric-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        .status-indicator {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 py-6">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-4">
                    <div class="h-12 w-12 bg-gradient-to-br from-orange-500 to-red-500 rounded-lg flex items-center justify-center">
                        <span class="text-white font-bold text-lg">E</span>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold text-gray-900">Enterprise Dashboard</h1>
                        <p class="text-gray-600">Sistema de Monitoramento Enterprise</p>
                    </div>
                </div>
                
                <div class="flex items-center gap-4">
                    <div id="systemStatus" class="flex items-center gap-2">
                        <div class="status-indicator w-3 h-3 bg-green-500 rounded-full"></div>
                        <span class="text-sm text-gray-600">Sistema Ativo</span>
                    </div>
                    
                    <a href="index.html" class="bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors">
                        Ver Card√°pio
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 py-8">
        
        <!-- Metrics Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <!-- System Health -->
            <div class="metric-card bg-white rounded-xl p-6 shadow-sm">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-sm font-medium text-gray-600">System Health</h3>
                    <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                </div>
                <div class="text-2xl font-bold text-gray-900" id="healthStatus">Healthy</div>
                <div class="text-xs text-gray-500 mt-1" id="uptime">Uptime: --</div>
            </div>

            <!-- Performance -->
            <div class="metric-card bg-white rounded-xl p-6 shadow-sm">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-sm font-medium text-gray-600">Performance</h3>
                    <svg class="w-4 h-4 text-green-500" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.293l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L9 9.414V13a1 1 0 102 0V9.414l1.293 1.293a1 1 0 001.414-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </div>
                <div class="text-2xl font-bold text-gray-900" id="performanceScore">--</div>
                <div class="text-xs text-gray-500 mt-1">LCP, FID, CLS</div>
            </div>

            <!-- Memory Usage -->
            <div class="metric-card bg-white rounded-xl p-6 shadow-sm">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-sm font-medium text-gray-600">Memory Usage</h3>
                    <svg class="w-4 h-4 text-blue-500" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"></path>
                    </svg>
                </div>
                <div class="text-2xl font-bold text-gray-900" id="memoryUsage">--MB</div>
                <div class="text-xs text-gray-500 mt-1" id="memoryPercent">-- %</div>
            </div>

            <!-- Components -->
            <div class="metric-card bg-white rounded-xl p-6 shadow-sm">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-sm font-medium text-gray-600">Components</h3>
                    <svg class="w-4 h-4 text-purple-500" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd"></path>
                    </svg>
                </div>
                <div class="text-2xl font-bold text-gray-900" id="componentCount">--</div>
                <div class="text-xs text-gray-500 mt-1">Active modules</div>
            </div>
        </div>

        <!-- Charts Section -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
            
            <!-- Performance Chart -->
            <div class="bg-white rounded-xl shadow-sm p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">Performance Metrics</h3>
                <div class="h-64 flex items-center justify-center">
                    <canvas id="performanceChart"></canvas>
                </div>
            </div>

            <!-- System Health Timeline -->
            <div class="bg-white rounded-xl shadow-sm p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">System Health Timeline</h3>
                <div class="h-64 flex items-center justify-center">
                    <canvas id="healthChart"></canvas>
                </div>
            </div>
        </div>

        <!-- System Information -->
        <div class="bg-white rounded-xl shadow-sm p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">System Information</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                
                <div>
                    <h4 class="text-sm font-medium text-gray-600 mb-2">Enterprise Features</h4>
                    <ul class="space-y-1 text-sm text-gray-700">
                        <li class="flex items-center gap-2">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                            Performance Monitoring
                        </li>
                        <li class="flex items-center gap-2">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                            Health Checking
                        </li>
                        <li class="flex items-center gap-2">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                            Real-time Metrics
                        </li>
                        <li class="flex items-center gap-2">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                            Enterprise Logging
                        </li>
                    </ul>
                </div>

                <div>
                    <h4 class="text-sm font-medium text-gray-600 mb-2">Compliance Standards</h4>
                    <ul class="space-y-1 text-sm text-gray-700">
                        <li>‚úÖ NASA/Google Standards</li>
                        <li>‚úÖ Functions &lt; 60 lines</li>
                        <li>‚úÖ Files &lt; 400 lines</li>
                        <li>‚úÖ Modular Architecture</li>
                    </ul>
                </div>

                <div>
                    <h4 class="text-sm font-medium text-gray-600 mb-2">Quick Actions</h4>
                    <div class="space-y-2">
                        <button onclick="exportMetrics()" class="w-full text-left bg-gray-50 hover:bg-gray-100 px-3 py-2 rounded-lg text-sm transition-colors">
                            üìä Export Metrics
                        </button>
                        <button onclick="refreshData()" class="w-full text-left bg-gray-50 hover:bg-gray-100 px-3 py-2 rounded-lg text-sm transition-colors">
                            üîÑ Refresh Data
                        </button>
                        <button onclick="clearLogs()" class="w-full text-left bg-gray-50 hover:bg-gray-100 px-3 py-2 rounded-lg text-sm transition-colors">
                            üóëÔ∏è Clear Logs
                        </button>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <!-- Footer -->
    <footer class="text-center py-8 text-gray-500 text-sm">
        <p>Enterprise Dashboard v2.0 - Sistema de Monitoramento Enterprise</p>
        <p class="mt-2">Integrado com <a href="index.html" class="text-orange-500 hover:underline">Menu Online</a></p>
    </footer>

    <script>
        class EnterpriseDashboard {
            constructor() {
                this.performanceChart = null;
                this.healthChart = null;
                this.init();
            }

            async init() {
                console.log('üöÄ Enterprise Dashboard initializing...');
                
                // Check if enterprise system is available
                if (typeof window.enterpriseSystem === 'undefined') {
                    console.warn('‚ö†Ô∏è Enterprise system not detected');
                    this.showOfflineMode();
                    return;
                }

                // Initialize charts
                this.initializeCharts();
                
                // Start real-time updates
                this.startRealTimeUpdates();
                
                // Load initial data
                await this.loadData();
                
                console.log('‚úÖ Enterprise Dashboard ready');
            }

            async loadData() {
                try {
                    // Try to get data from enterprise system or simulate
                    const metrics = this.getEnterpriseMetrics();
                    this.updateMetrics(metrics);
                    this.updateCharts(metrics);
                } catch (error) {
                    console.error('Failed to load data:', error);
                    this.showSimulatedData();
                }
            }

            getEnterpriseMetrics() {
                // Try to get real metrics from enterprise system
                if (window.enterpriseSystem && typeof window.enterpriseSystem.getMetrics === 'function') {
                    return window.enterpriseSystem.getMetrics();
                }
                
                // Fallback to simulated data
                return this.getSimulatedMetrics();
            }

            getSimulatedMetrics() {
                return {
                    timestamp: Date.now(),
                    uptime: Date.now() - (Date.now() - 300000), // 5 minutes
                    memory: {
                        used: 45,
                        limit: 100,
                        usage: 45
                    },
                    performance: {
                        lcp: 1800,
                        fid: 45,
                        cls: 0.06
                    },
                    components: 3,
                    healthStatus: 'healthy',
                    isInitialized: true
                };
            }

            updateMetrics(metrics) {
                // Update health status
                document.getElementById('healthStatus').textContent = 
                    metrics.healthStatus === 'healthy' ? 'Healthy' : 'Warning';
                    
                // Update uptime
                const uptimeHours = Math.floor(metrics.uptime / (1000 * 60 * 60));
                const uptimeMinutes = Math.floor((metrics.uptime % (1000 * 60 * 60)) / (1000 * 60));
                document.getElementById('uptime').textContent = 
                    `Uptime: ${uptimeHours}h ${uptimeMinutes}m`;

                // Update performance
                if (metrics.performance) {
                    const avgScore = Math.round((100 - metrics.performance.lcp/50 + (100 - metrics.performance.fid) + (100 - metrics.performance.cls*1000)) / 3);
                    document.getElementById('performanceScore').textContent = avgScore > 0 ? avgScore : 'Good';
                }

                // Update memory
                if (metrics.memory) {
                    document.getElementById('memoryUsage').textContent = `${metrics.memory.used}MB`;
                    document.getElementById('memoryPercent').textContent = `${metrics.memory.usage}%`;
                }

                // Update components
                document.getElementById('componentCount').textContent = metrics.components || 3;
            }

            initializeCharts() {
                // Performance Chart
                const perfCtx = document.getElementById('performanceChart');
                this.performanceChart = new Chart(perfCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['LCP', 'FID', 'CLS'],
                        datasets: [{
                            data: [85, 95, 90],
                            backgroundColor: ['#10B981', '#3B82F6', '#8B5CF6'],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        }
                    }
                });

                // Health Chart
                const healthCtx = document.getElementById('healthChart');
                this.healthChart = new Chart(healthCtx, {
                    type: 'line',
                    data: {
                        labels: ['5m', '4m', '3m', '2m', '1m', 'Now'],
                        datasets: [{
                            label: 'Health Score',
                            data: [98, 97, 99, 98, 97, 98],
                            borderColor: '#10B981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            borderWidth: 2,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: false,
                                min: 90,
                                max: 100
                            }
                        }
                    }
                });
            }

            updateCharts(metrics) {
                if (this.performanceChart && metrics.performance) {
                    const lcpScore = Math.max(0, 100 - metrics.performance.lcp / 50);
                    const fidScore = Math.max(0, 100 - metrics.performance.fid);
                    const clsScore = Math.max(0, 100 - metrics.performance.cls * 1000);
                    
                    this.performanceChart.data.datasets[0].data = [lcpScore, fidScore, clsScore];
                    this.performanceChart.update();
                }
            }

            startRealTimeUpdates() {
                setInterval(() => {
                    this.loadData();
                }, 5000); // Update every 5 seconds
            }

            showOfflineMode() {
                document.getElementById('systemStatus').innerHTML = `
                    <div class="flex items-center gap-2">
                        <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                        <span class="text-sm text-gray-600">Demo Mode</span>
                    </div>
                `;
                this.showSimulatedData();
            }

            showSimulatedData() {
                const simulatedMetrics = this.getSimulatedMetrics();
                this.updateMetrics(simulatedMetrics);
                this.initializeCharts();
            }
        }

        // Global functions
        function exportMetrics() {
            const dashboard = window.enterpriseDashboard;
            const metrics = dashboard ? dashboard.getEnterpriseMetrics() : {};
            
            const dataStr = JSON.stringify(metrics, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `enterprise-metrics-${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        }

        function refreshData() {
            if (window.enterpriseDashboard) {
                window.enterpriseDashboard.loadData();
                console.log('üîÑ Data refreshed');
            }
        }

        function clearLogs() {
            console.clear();
            console.log('üóëÔ∏è Logs cleared');
        }

        // Initialize dashboard when page loads
        document.addEventListener('DOMContentLoaded', () => {
            window.enterpriseDashboard = new EnterpriseDashboard();
        });
    </script>
</body>
</html>