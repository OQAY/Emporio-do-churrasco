<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compara√ß√£o Performance: Normal vs Lazy Loading</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        .comparison { display: flex; gap: 20px; margin: 20px 0; }
        .column { flex: 1; padding: 20px; border: 2px solid #ddd; border-radius: 10px; }
        .normal { border-color: #3b82f6; background: #eff6ff; }
        .lazy { border-color: #10b981; background: #ecfdf5; }
        .image-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin: 20px 0; }
        .image-box { width: 100px; height: 80px; border: 1px solid #ccc; position: relative; }
        .image-box img { width: 100%; height: 100%; object-fit: cover; }
        .status { position: absolute; top: 2px; right: 2px; background: rgba(0,0,0,0.7); color: white; padding: 2px 4px; font-size: 10px; border-radius: 3px; }
        .metrics { background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 10px 0; }
        .log { background: #f0f0f0; padding: 10px; margin: 10px 0; font-size: 12px; height: 200px; overflow-y: auto; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ Performance: Normal vs Lazy Loading</h1>
        <p><strong>Cen√°rio:</strong> Card√°pio com 12 imagens - simula p√°gina real</p>
        
        <div class="comparison">
            <div class="column normal">
                <h2>üü¶ Carregamento Normal</h2>
                <p>Todas as 12 imagens carregam imediatamente</p>
                <div class="image-grid" id="normal-grid"></div>
                <div class="metrics">
                    <div><strong>Primeira imagem:</strong> <span id="normal-first">-</span></div>
                    <div><strong>√öltima imagem:</strong> <span id="normal-last">-</span></div>
                    <div><strong>Tempo total:</strong> <span id="normal-total">-</span></div>
                    <div><strong>Requests simult√¢neos:</strong> <span id="normal-requests">12</span></div>
                </div>
                <div class="log" id="normal-log"></div>
            </div>
            
            <div class="column lazy">
                <h2>üü© Lazy Loading</h2>
                <p>Apenas imagens vis√≠veis carregam</p>
                <div class="image-grid" id="lazy-grid"></div>
                <div class="metrics">
                    <div><strong>Primeira imagem:</strong> <span id="lazy-first">-</span></div>
                    <div><strong>Imagens vis√≠veis:</strong> <span id="lazy-visible">-</span></div>
                    <div><strong>Tempo inicial:</strong> <span id="lazy-initial">-</span></div>
                    <div><strong>Requests iniciais:</strong> <span id="lazy-requests">6 (s√≥ vis√≠veis)</span></div>
                </div>
                <div class="log" id="lazy-log"></div>
            </div>
        </div>
        
        <div style="background: #fef3c7; padding: 20px; border-radius: 10px; margin: 20px 0;">
            <h3>üèÜ Resultado Esperado:</h3>
            <p><strong>Lazy Loading ser√° muito mais r√°pida</strong> para mostrar a primeira tela, mesmo que imagens individuais demorem um pouco mais quando solicitadas.</p>
        </div>
    </div>

    <script>
        const startTime = performance.now();
        let normalStats = { first: null, last: null, loaded: 0 };
        let lazyStats = { first: null, visible: 0, loaded: 0 };
        
        function logNormal(msg) {
            const log = document.getElementById('normal-log');
            const time = ((performance.now() - startTime) / 1000).toFixed(3);
            log.innerHTML += `<div>[${time}s] ${msg}</div>`;
            log.scrollTop = log.scrollHeight;
        }
        
        function logLazy(msg) {
            const log = document.getElementById('lazy-log');
            const time = ((performance.now() - startTime) / 1000).toFixed(3);
            log.innerHTML += `<div>[${time}s] ${msg}</div>`;
            log.scrollTop = log.scrollHeight;
        }
        
        function updateNormalStats() {
            document.getElementById('normal-first').textContent = normalStats.first ? `${normalStats.first}s` : '-';
            document.getElementById('normal-last').textContent = normalStats.last ? `${normalStats.last}s` : '-';
            document.getElementById('normal-total').textContent = normalStats.last ? `${normalStats.last}s` : '-';
        }
        
        function updateLazyStats() {
            document.getElementById('lazy-first').textContent = lazyStats.first ? `${lazyStats.first}s` : '-';
            document.getElementById('lazy-visible').textContent = `${lazyStats.visible}/6`;
            document.getElementById('lazy-initial').textContent = lazyStats.visible === 6 ? `${lazyStats.first}s` : '-';
        }
        
        // Create normal images (all load immediately)
        logNormal('üöÄ Criando 12 imagens normais...');
        for (let i = 1; i <= 12; i++) {
            const box = document.createElement('div');
            box.className = 'image-box';
            
            const img = document.createElement('img');
            img.src = `https://picsum.photos/100/80?random=${i}`;
            
            const status = document.createElement('div');
            status.className = 'status';
            status.textContent = '‚è≥';
            
            img.onload = () => {
                const loadTime = ((performance.now() - startTime) / 1000).toFixed(3);
                status.textContent = '‚úÖ';
                normalStats.loaded++;
                
                if (!normalStats.first) {
                    normalStats.first = loadTime;
                    logNormal(`üéØ PRIMEIRA imagem: ${loadTime}s`);
                }
                
                normalStats.last = loadTime;
                logNormal(`‚úÖ Imagem ${i}: ${loadTime}s`);
                updateNormalStats();
                
                if (normalStats.loaded === 12) {
                    logNormal(`üèÅ TODAS carregadas em: ${loadTime}s`);
                }
            };
            
            img.onerror = () => {
                status.textContent = '‚ùå';
                logNormal(`‚ùå Erro imagem ${i}`);
            };
            
            box.appendChild(img);
            box.appendChild(status);
            document.getElementById('normal-grid').appendChild(box);
        }
        
        // Create lazy images (only first 6 are "visible")
        logLazy('üöÄ Criando 12 imagens com lazy loading...');
        logLazy('üëÅÔ∏è Apenas primeiras 6 s√£o "vis√≠veis" (simula√ß√£o)');
        
        for (let i = 1; i <= 12; i++) {
            const box = document.createElement('div');
            box.className = 'image-box';
            
            const img = document.createElement('img');
            const status = document.createElement('div');
            status.className = 'status';
            
            // Only first 6 are "visible" (simulate lazy loading)
            if (i <= 6) {
                img.src = `https://picsum.photos/100/80?random=${i + 50}`;
                status.textContent = '‚è≥';
                
                img.onload = () => {
                    const loadTime = ((performance.now() - startTime) / 1000).toFixed(3);
                    status.textContent = '‚úÖ';
                    lazyStats.loaded++;
                    lazyStats.visible++;
                    
                    if (!lazyStats.first) {
                        lazyStats.first = loadTime;
                        logLazy(`üéØ PRIMEIRA imagem vis√≠vel: ${loadTime}s`);
                    }
                    
                    logLazy(`‚úÖ Imagem vis√≠vel ${i}: ${loadTime}s`);
                    updateLazyStats();
                    
                    if (lazyStats.visible === 6) {
                        logLazy(`üèÅ TELA INICIAL completa: ${loadTime}s`);
                        logLazy(`üíæ 6 imagens n√£o vis√≠veis N√ÉO foram baixadas!`);
                    }
                };
                
                img.onerror = () => {
                    status.textContent = '‚ùå';
                    logLazy(`‚ùå Erro imagem vis√≠vel ${i}`);
                };
            } else {
                // Not visible - placeholder only
                img.src = 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="%23ddd" viewBox="0 0 24 24"%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em"%3EN√£o vis√≠vel%3C/text%3E%3C/svg%3E';
                status.textContent = 'üëÅÔ∏è‚Äçüó®Ô∏è';
                logLazy(`‚è≥ Imagem ${i}: n√£o vis√≠vel (n√£o baixada)`);
            }
            
            box.appendChild(img);
            box.appendChild(status);
            document.getElementById('lazy-grid').appendChild(box);
        }
        
        // Final comparison after 8 seconds
        setTimeout(() => {
            const normalTime = normalStats.last;
            const lazyTime = lazyStats.first;
            
            if (normalTime && lazyTime) {
                const improvement = ((normalTime - lazyTime) / normalTime * 100).toFixed(1);
                
                logNormal(`üìä === RESULTADO FINAL ===`);
                logNormal(`‚è±Ô∏è Tempo para ver primeira tela: ${normalTime}s`);
                
                logLazy(`üìä === RESULTADO FINAL ===`);
                logLazy(`‚è±Ô∏è Tempo para ver primeira tela: ${lazyTime}s`);
                logLazy(`üöÄ ${improvement}% mais r√°pido que carregamento normal!`);
                logLazy(`üíæ Economia: 6 imagens n√£o baixadas = ~200KB`);
            }
        }, 8000);
    </script>
</body>
</html>